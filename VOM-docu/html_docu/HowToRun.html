<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>HowToRun</title></head><body><p style="float:right; border-width:1px; border-style:solid"><object data="navi-bar.html" type="text/html"></object></p><h1>VOM - Model Description </h1><h2>VOM - info</h2><h3>VOM - how to run</h3><hr style="clear: right;"><hr><h2>Overview</h2><p>This is a short overview of how to run the model on differentsystems.Please consider the VOM - info, where the needed files and settings aredescribed. This describtion assumes that all these files are present.You have to compile the files and run the modelrepeatedly until the file "finalbest.txt" appears in the directory. Youhave three alternatives to to this.</p><hr><h3>Run the model manually on a Unix machine</h3><p>You have to compile and start the model. As described in VOM - info you have to restart the model until the "finalbest.txt" is written.To compile the model on a unix machine with the pgf90 compiler, type (replacethe pgf90 command with the appropriate command for your compiler, e.g.ifort for the Intel Fortran Compiler):</p><pre>pgf90 -o model.x coreprog.f90 sce.f90 gasexcwatbal.f90 </pre><p>This will create an executable called "model.x". Now you have to start the model by typing:</p><pre>./model.x</pre><p>The model runs and starts to create and fill some files. One ist the"progress.txt" file, which gets progressively filled with messages asthe model runs. If you want to find out whether the model is stillrunning, you can observe the "progress.txt" or use the "ps" command. Ifthe model run has stopped and the"finalbest.txt" has not been written, you have to keep restart themodel again as described above. Every start of the executable addsanother loop to the file "progress.txt" and a new set of parameters,until the optimal set has been found and the file "finalbest.txt" iswritten to the disc. If the "finalbest.txt" appears, you have to do alast restart of the model to write the results obtained with theoptimised parameter set to the disc. This does not take long.</p><hr><h3>Run the model automatically on a single computer</h3><p>There are 3 scripts available to compile and run the model automatically until the "finalbest.txt" is written:</p><ul>	<li>computer_start.script</li>	<li>computer_job.script</li>	<li>computer_vomrun.script</li></ul>Best you place this files inside the same folder as the code files are.Only "computer_start.script" has to be started after adjusting the directorypath in that script to the directory path that contains the code anddata. This script together with the others will make the model runrepeatedly until "finalbest.txt" is written to the "results"subdirectory of thegiven directory. Now you have to run the model once again to create theresults files by typing:<pre>./model.x</pre><p>Inside the "computer_start.script" the use of the "pgrep" command is specified. If your environment doesn't support this command please comment it out.</p><p>Inside the "computer_vomrun.script" the use of the pgf90 compiler is specified. If you want to use another compiler you have to replacethe pgf90 command with the appropriate command for your compiler.</p><hr><h3>Run the model automatically on a cluster</h3><p>There are 3 scripts available to compile and run the model automatically on a cluster until the "finalbest.txt" is written:</p><ul>	<li>cluster_start.script</li>	<li>cluster_bsubjob.script</li>	<li>cluster_vomrun.script</li></ul>These scripts are adjusted to run the model on the cluster of the Max Planck Institute for Biogeochemistry.<br>Theprogram files have to be located in a directory that can be accessed bythe cluster. Only "cluster_start.script" has to be started after adjustingthe directory path in that script to the directory path that containsthe code and data. Best you place the script files inside the same folder as the other program files are. Also, you have to specify the host name inside the"cluster_bsubjob.script" and the path to the temporary folder on the cluster inside "cluster_vomrun.script". The scripts will make the model run repeatedly until"finalbest.txt" is written to the "results" subdirectory of thegiven directory. Now you have to run the model once again to createsome result files by typing:<pre>./model.x</pre><p>Inside the "computer_start.script" the use of the "pgrep" command is specified. If your environment doesn't support this command please comment it out.</p><p>Inside the "vom_cluster_run.script" the use of the pgf90 compiler is specified. If you want to use another compiler you have to replacethe pgf90 command with the appropriate command for your compiler.</p><hr></body></html>